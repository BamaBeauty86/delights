@inherits LayoutComponentBase
@inject IOptions<BuildStatus> BuildStatus
@inject ModuleCollection Modules
@inject IServiceProvider ServiceProvider

<AntDesign.Layout Style="min-height: 100vh; background: initial;">
    <Sider Collapsible Theme="SiderTheme.Light" Breakpoint="BreakpointType.Xl" CollapsedWidth="0">
        <Menu Mode="MenuMode.Inline" Theme="MenuTheme.Light">
            <MenuItem Class="text-center p-0">
                Delights
            </MenuItem>
            <MenuItem>
                <MdiIcon Type="@IconNames.Home" />
                <span>
                    <MenuLink href="" Match="NavLinkMatch.All">
                        Home
                    </MenuLink>
                </span>
            </MenuItem>
            @foreach (var module in Modules.AllClientModules())
            {
                var ui = module.GetUI(ServiceProvider);
                if (ui.RootPath != "")
                {
                    <MenuItem>
                        <span>
                            @if (ui.Icon is null)
                            {
                                <MdiIcon Type="@IconNames.Module" />
                            }
                            else
                            {
                                @ui.Icon
                            }
                        </span>
                        <span>
                            <MenuLink href="@ui.RootPath">
                                @ui.DisplayName
                            </MenuLink>
                        </span>
                    </MenuItem>
                }
            }
            <MenuItem>
                <MdiIcon Type="@IconNames.Search" />
                <span>
                    <MenuLink href="search">
                        Search
                    </MenuLink>
                </span>
            </MenuItem>
            <MenuItem>
                <MdiIcon Type="@IconNames.Settings" />
                <span>
                    <MenuLink href="settings">
                        Settings
                    </MenuLink>
                </span>
            </MenuItem>
        </Menu>
    </Sider>
    <AntDesign.Layout Style="background: initial;">
        <Content>@Body</Content>
        <Footer Class="text-center p-1">
            <MdiIcon Type="copyright" />
            2020 - @DateTimeOffset.Now.Year, StardustDL. All rights reserved.
            Powered by
            <Popover Title="@($"Delights v{BuildStatus.Value.Version}")">
                <ContentTemplate>
                    <div>
                        Repository: <a href="https://github.com/@BuildStatus.Value.Repository">@BuildStatus.Value.Repository</a>
                        <br />
                        Commit: <a href="https://github.com/@BuildStatus.Value.Repository/commit/@BuildStatus.Value.Commit">@BuildStatus.Value.TrimedCommit</a>
                        <br />
                        Branch: <a href="https://github.com/@BuildStatus.Value.Repository/tree/@BuildStatus.Value.Branch">@BuildStatus.Value.TrimedBranch</a>
                        <br />
                        Version: @BuildStatus.Value.Version
                        <br />
                        Built Date: @BuildStatus.Value.BuildDate
                    </div>
                </ContentTemplate>
                <ChildContent>
                    <a href="https://github.com/StardustDL/delights">Delights</a>
                </ChildContent>
            </Popover>
        </Footer>
    </AntDesign.Layout>
</AntDesign.Layout>

<BackTop></BackTop>
